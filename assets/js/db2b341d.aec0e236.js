"use strict";(self.webpackChunknolo_28_mokgosi=self.webpackChunknolo_28_mokgosi||[]).push([[4012],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,b=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return n?o.createElement(b,r(r({ref:t},u),{},{components:n})):o.createElement(b,r({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=c;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a.mdxType="string"==typeof e?e:i,r[1]=a;for(var p=2;p<l;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2721:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>p});var o=n(7462),i=(n(7294),n(3905));const l={slug:"expodeployment",sidebar_label:"Expo Deployment",sidebar_position:3},r="Expo Deployment",a={unversionedId:"engineering/expo-deployment",id:"engineering/expo-deployment",title:"Expo Deployment",description:"Context",source:"@site/docs/engineering/expo-deployment.md",sourceDirName:"engineering",slug:"/engineering/expodeployment",permalink:"/docs/engineering/expodeployment",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"expodeployment",sidebar_label:"Expo Deployment",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Firebase Token Validation in Azure",permalink:"/docs/engineering/jwttokenvalidationonazurefunction"},next:{title:"Containerised website in Azure",permalink:"/docs/engineering/websiteOnAzureContainerisedApps"}},s={},p=[{value:"Context",id:"context",level:2},{value:"Deploy to iStore",id:"deploy-to-istore",level:2},{value:"Deploy to Android",id:"deploy-to-android",level:2},{value:"Notes",id:"notes",level:2},{value:"Build Issues",id:"build-issues",level:3},{value:"Project config",id:"project-config",level:3},{value:"Increasing Version Number",id:"increasing-version-number",level:3},{value:"Testing",id:"testing",level:3},{value:"IOS Submission",id:"ios-submission",level:3},{value:"In case of build failure",id:"in-case-of-build-failure",level:3},{value:"Build number and version not increasing issue",id:"build-number-and-version-not-increasing-issue",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Reference",id:"reference",level:2}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"expo-deployment"},"Expo Deployment"),(0,i.kt)("h2",{id:"context"},"Context"),(0,i.kt)("p",null,"Expo is a framework to build React Native apps. This document explains how to deploy react native app to iStore and Google Play."),(0,i.kt)("h2",{id:"deploy-to-istore"},"Deploy to iStore"),(0,i.kt)("p",null,"To deploy to Apple Store, you need to join ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/programs/"},"Apple Developer Program")," where you pay $99 per year."),(0,i.kt)("p",null,"Once registered, you need to go through below steps as documented ",(0,i.kt)("a",{parentName:"p",href:"https://docs.expo.dev/build/setup/"},"here")," (Provided you built your app using expo)"),(0,i.kt)("p",null,"All platforms ",(0,i.kt)("inlineCode",{parentName:"p"},"eas build --platform all")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install the latest EAS CLI ",(0,i.kt)("inlineCode",{parentName:"li"},"npm install -g eas-cli")),(0,i.kt)("li",{parentName:"ol"},"Log into your expo account ",(0,i.kt)("inlineCode",{parentName:"li"},"eas login")),(0,i.kt)("li",{parentName:"ol"},"Ensure the build number is the correct one on app.config"),(0,i.kt)("li",{parentName:"ol"},"Prebuild the app by running ",(0,i.kt)("inlineCode",{parentName:"li"},"npx expo prebuild")),(0,i.kt)("li",{parentName:"ol"},"Ensure that the build number is updated on Info.plist inside the iOS folder"),(0,i.kt)("li",{parentName:"ol"},"Build the app by running ",(0,i.kt)("inlineCode",{parentName:"li"},"eas build -p ios")),(0,i.kt)("li",{parentName:"ol"},"Submit the app to applestore by running ",(0,i.kt)("inlineCode",{parentName:"li"},"eas submit -p ios"))),(0,i.kt)("p",null,"On build and submit, follow the prompts to log into apple store"),(0,i.kt)("p",null,"Should you choose to upload manually, step 7 will be replaced by following:\n7. Download transporter\n8. Download latest build from eas\n9. Upload the build using transporter"),(0,i.kt)("h2",{id:"deploy-to-android"},"Deploy to Android"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install the latest EAS CLI ",(0,i.kt)("inlineCode",{parentName:"li"},"npm install -g eas-cli")),(0,i.kt)("li",{parentName:"ol"},"Log into your expo account ",(0,i.kt)("inlineCode",{parentName:"li"},"eas login")),(0,i.kt)("li",{parentName:"ol"},"Ensure the build number is the correct one on app.config"),(0,i.kt)("li",{parentName:"ol"},"Prebuild the app by running ",(0,i.kt)("inlineCode",{parentName:"li"},"npx expo prebuild")),(0,i.kt)("li",{parentName:"ol"},"Ensure that the build number is updated on Info.plist inside the iOS folder"),(0,i.kt)("li",{parentName:"ol"},"Build the app by running ",(0,i.kt)("inlineCode",{parentName:"li"},"eas build -p android")),(0,i.kt)("li",{parentName:"ol"},"Submit the app to Google Play by running ",(0,i.kt)("inlineCode",{parentName:"li"},"eas submit -p android"))),(0,i.kt)("p",null,"Should you choose to upload manually, step 7 will be replaced by following:\n7. Download latest build from eas\n8. Upload in the test section of Google Play Console."),(0,i.kt)("h2",{id:"notes"},"Notes"),(0,i.kt)("h3",{id:"build-issues"},"Build Issues"),(0,i.kt)("p",null,"Should you experience build issues that takes longer to fix, follow below steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Deleted the iOS and android folders"),(0,i.kt)("li",{parentName:"ol"},"Ran eas prebuild to recreate the folders"),(0,i.kt)("li",{parentName:"ol"},"Note: eas run:ios still complained about pods crap"),(0,i.kt)("li",{parentName:"ol"},"Ran eas build:ios to build and it worked"),(0,i.kt)("li",{parentName:"ol"},"Ran eas submit -p iOS to push to IOS and it worked.")),(0,i.kt)("h3",{id:"project-config"},"Project config"),(0,i.kt)("p",null,"In the project config, setup the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Build number"),(0,i.kt)("li",{parentName:"ul"},"Version"),(0,i.kt)("li",{parentName:"ul"},"Icon: Setup a 1024 by 1024 icon and replace icon in static files"),(0,i.kt)("li",{parentName:"ul"},"Splash Screen: Create a 1284 by 2778 splash screen and replace the default in static files.")),(0,i.kt)("h3",{id:"increasing-version-number"},"Increasing Version Number"),(0,i.kt)("p",null,"Version number has 3 components. On 1.2.3, "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"3 is patch for minor changes or bug fixed"),(0,i.kt)("li",{parentName:"ul"},"2 is minor for new functionality"),(0,i.kt)("li",{parentName:"ul"},"1 is major changes, like rewrite of a project or major feature")),(0,i.kt)("h3",{id:"testing"},"Testing"),(0,i.kt)("p",null,"You can create internal and external list on apple.\nInternal list can test almost immediately, for external, might need approval."),(0,i.kt)("h3",{id:"ios-submission"},"IOS Submission"),(0,i.kt)("p",null,"Preview Picture"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"6.5 Picture should be 1284 X 2778 or 2778 X 1242"),(0,i.kt)("li",{parentName:"ul"},"5.5 pictures should be 1242 X 2208 or 2208 X 1242")),(0,i.kt)("p",null,"Submitting to store is not straight forward. You have specify what user information you are collecting and purpose like tracking or advertising.  "),(0,i.kt)("p",null,'Once submission is successful, you will get a note like "Your binary has been successfully uploaded to App Store Connect!".You will receive an e-mail when the processing finishes.It usually takes about 5-10 minutes depending on how busy Apple servers are.'),(0,i.kt)("h3",{id:"in-case-of-build-failure"},"In case of build failure"),(0,i.kt)("p",null,"It is not easy to debug eas build compared to legacy expo build:ios. In eas, it's difficult to differentiate between errors and warning.\nYou log into expo portal and navigate to Fastlane and try figure out which package is breaking your build.\nIn my case it was the firebase package, couldn\u2019t see error clearly on the portal so I ran expo build:ios and got the error highlighted in red on the terminal. "),(0,i.kt)("p",null,"Same error was there on Fastlane output but was part of the warnings.\nSolution marked as correct on ",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/72179070/react-native-bundling-failure-error-message-while-trying-to-resolve-module-i"},"stackoverflow")," fixed by build."),(0,i.kt)("h3",{id:"build-number-and-version-not-increasing-issue"},"Build number and version not increasing issue"),(0,i.kt)("p",null,"Increasing build number on app.config might not increase build number for ios."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Go to to iOS\u2026Plist and increase the version"),(0,i.kt)("li",{parentName:"ul"},"Run \u201cexpo prebuild\u201d")),(0,i.kt)("p",null,"Ensure you run expo rebuild command according to ",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase"},"stackoverflow")),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"Visit ",(0,i.kt)("a",{parentName:"p",href:"https://expo.dev"},"expo")," for latest deployment information."),(0,i.kt)("h2",{id:"reference"},"Reference"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"#1:",(0,i.kt)("a",{parentName:"li",href:"https://levelup.gitconnected.com/react-native-how-to-publish-an-expo-app-to-testflight-debug-common-errors-90e427b4b5ea"},"https://levelup.gitconnected.com/react-native-how-to-publish-an-expo-app-to-testflight-debug-common-errors-90e427b4b5ea")),(0,i.kt)("li",{parentName:"ul"},"#2: ",(0,i.kt)("a",{parentName:"li",href:"https://docs.expo.dev/build/setup/"},"https://docs.expo.dev/build/setup/")),(0,i.kt)("li",{parentName:"ul"},"#3: ",(0,i.kt)("a",{parentName:"li",href:"https://docs.expo.dev/submit/ios/"},"https://docs.expo.dev/submit/ios/")),(0,i.kt)("li",{parentName:"ul"},"#4: ",(0,i.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase"},"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase")),(0,i.kt)("li",{parentName:"ul"},"#5: ",(0,i.kt)("a",{parentName:"li",href:"https://gabrielleearnshaw.medium.com/versioning-mobile-app-releases-like-a-pro-25137766150a"},"https://gabrielleearnshaw.medium.com/versioning-mobile-app-releases-like-a-pro-25137766150a"))))}d.isMDXComponent=!0}}]);