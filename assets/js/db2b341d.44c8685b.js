"use strict";(self.webpackChunknolo_28_mokgosi=self.webpackChunknolo_28_mokgosi||[]).push([[4012],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,b=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?o.createElement(b,a(a({ref:t},p),{},{components:n})):o.createElement(b,a({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var u=2;u<i;u++)a[u]=n[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2721:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var o=n(7462),r=(n(7294),n(3905));const i={slug:"expodeployment",sidebar_label:"Expo Deployment",sidebar_position:3},a="Expo Deployment",l={unversionedId:"engineering/expo-deployment",id:"engineering/expo-deployment",title:"Expo Deployment",description:"Context",source:"@site/docs/engineering/expo-deployment.md",sourceDirName:"engineering",slug:"/engineering/expodeployment",permalink:"/docs/engineering/expodeployment",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"expodeployment",sidebar_label:"Expo Deployment",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Firebase Token Validation in Azure",permalink:"/docs/engineering/jwttokenvalidationonazurefunction"},next:{title:"Containerised website in Azure",permalink:"/docs/engineering/websiteOnAzureContainerisedApps"}},s={},u=[{value:"Context",id:"context",level:2},{value:"Solution",id:"solution",level:2},{value:"Notes",id:"notes",level:2},{value:"Project config",id:"project-config",level:3},{value:"Increasing Version Number",id:"increasing-version-number",level:3},{value:"Testing",id:"testing",level:3},{value:"IOS Submission",id:"ios-submission",level:3},{value:"In case of build failure",id:"in-case-of-build-failure",level:3},{value:"Build number and version not increasing issue",id:"build-number-and-version-not-increasing-issue",level:3},{value:"Reference",id:"reference",level:2}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"expo-deployment"},"Expo Deployment"),(0,r.kt)("h2",{id:"context"},"Context"),(0,r.kt)("p",null,"I've been playing around with React Native for quite sometime but I have never deployed anything on iStore. Part of the learning I decided to take on the challenge."),(0,r.kt)("h2",{id:"solution"},"Solution"),(0,r.kt)("p",null,"To deploy to Apple Store, you need to join ",(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/programs/"},"Apple Developer Program")," where you pay $99 per year."),(0,r.kt)("p",null,"Once registered, you need to go through below steps as documented ",(0,r.kt)("a",{parentName:"p",href:"https://docs.expo.dev/build/setup/"},"here")," (Provided you built your app using expo)"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install the latest EAS CLI\n",(0,r.kt)("inlineCode",{parentName:"li"},"npm install -g eas-cli")),(0,r.kt)("li",{parentName:"ol"},"Log into your expo account\n",(0,r.kt)("inlineCode",{parentName:"li"},"eas login")),(0,r.kt)("li",{parentName:"ol"},"Configure the project\n",(0,r.kt)("inlineCode",{parentName:"li"},"eas build:configure"),"\nupdate the build and version on ")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"app.config file"),(0,r.kt)("li",{parentName:"ul"},"info.plist (IOS)")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"To ensure you version number registers on the build, run ``"),(0,r.kt)("li",{parentName:"ol"},"Run a build. Can be for ios or android platform")),(0,r.kt)("p",null,"IOS ",(0,r.kt)("inlineCode",{parentName:"p"},"eas build --platform ios")),(0,r.kt)("p",null,"Android ",(0,r.kt)("inlineCode",{parentName:"p"},"eas build --platform android")),(0,r.kt)("p",null,"All platforms ",(0,r.kt)("inlineCode",{parentName:"p"},"eas build --platform all")),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Deploy the build")),(0,r.kt)("h2",{id:"notes"},"Notes"),(0,r.kt)("h3",{id:"project-config"},"Project config"),(0,r.kt)("p",null,"In the project config, setup the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Build number"),(0,r.kt)("li",{parentName:"ul"},"Version"),(0,r.kt)("li",{parentName:"ul"},"Icon: Setup a 1024 by 1024 icon and replace icon in static files"),(0,r.kt)("li",{parentName:"ul"},"Splash Screen: Create a 1284 by 2778 splash screen and replace the default in static files.")),(0,r.kt)("h3",{id:"increasing-version-number"},"Increasing Version Number"),(0,r.kt)("p",null,"Version number has 3 components. On 1.2.3, "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"3 is patch for minor changes or bug fixed"),(0,r.kt)("li",{parentName:"ul"},"2 is minor for new functionality"),(0,r.kt)("li",{parentName:"ul"},"1 is major changes, like rewrite of a project or major feature")),(0,r.kt)("h3",{id:"testing"},"Testing"),(0,r.kt)("p",null,"You can create internal and external list on apple.\nInternal list can test almost immediately, for external, might need approval."),(0,r.kt)("h3",{id:"ios-submission"},"IOS Submission"),(0,r.kt)("p",null,"Preview Picture"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"6.5 Picture should be 1284 X 2778 or 2778 X 1242"),(0,r.kt)("li",{parentName:"ul"},"5.5 pictures should be 1242 X 2208 or 2208 X 1242")),(0,r.kt)("p",null,"Submitting to store is not straight forward. You have specify what user information you are collecting and purpose like tracking or advertising.  "),(0,r.kt)("p",null,'Once submission is successful, you will get a note like "Your binary has been successfully uploaded to App Store Connect!".You will receive an e-mail when the processing finishes.It usually takes about 5-10 minutes depending on how busy Apple servers are.'),(0,r.kt)("h3",{id:"in-case-of-build-failure"},"In case of build failure"),(0,r.kt)("p",null,"It is not easy to debug eas build compared to legacy expo build:ios. In eas, it's difficult to differentiate between errors and warning.\nYou log into expo portal and navigate to Fastlane and try figure out which package is breaking your build.\nIn my case it was the firebase package, couldn\u2019t see error clearly on the portal so I ran expo build:ios and got the error highlighted in red on the terminal. "),(0,r.kt)("p",null,"Same error was there on Fastlane output but was part of the warnings.\nSolution marked as correct on ",(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/72179070/react-native-bundling-failure-error-message-while-trying-to-resolve-module-i"},"stackoverflow")," fixed by build."),(0,r.kt)("h3",{id:"build-number-and-version-not-increasing-issue"},"Build number and version not increasing issue"),(0,r.kt)("p",null,"Increasing build number on app.config might not increase build number for ios."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to to iOS\u2026Plist and increase the version"),(0,r.kt)("li",{parentName:"ul"},"Run \u201cexpo prebuild\u201d")),(0,r.kt)("p",null,"Ensure you run expo rebuild command according to ",(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase"},"stackoverflow")),(0,r.kt)("h2",{id:"reference"},"Reference"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"#1:",(0,r.kt)("a",{parentName:"li",href:"https://levelup.gitconnected.com/react-native-how-to-publish-an-expo-app-to-testflight-debug-common-errors-90e427b4b5ea"},"https://levelup.gitconnected.com/react-native-how-to-publish-an-expo-app-to-testflight-debug-common-errors-90e427b4b5ea")),(0,r.kt)("li",{parentName:"ul"},"#2: ",(0,r.kt)("a",{parentName:"li",href:"https://docs.expo.dev/build/setup/"},"https://docs.expo.dev/build/setup/")),(0,r.kt)("li",{parentName:"ul"},"#3: ",(0,r.kt)("a",{parentName:"li",href:"https://docs.expo.dev/submit/ios/"},"https://docs.expo.dev/submit/ios/")),(0,r.kt)("li",{parentName:"ul"},"#4: ",(0,r.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase"},"https://stackoverflow.com/questions/71411920/react-native-expo-build-number-does-not-increase")),(0,r.kt)("li",{parentName:"ul"},"#5: ",(0,r.kt)("a",{parentName:"li",href:"https://gabrielleearnshaw.medium.com/versioning-mobile-app-releases-like-a-pro-25137766150a"},"https://gabrielleearnshaw.medium.com/versioning-mobile-app-releases-like-a-pro-25137766150a"))))}c.isMDXComponent=!0}}]);