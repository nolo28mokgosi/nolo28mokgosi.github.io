"use strict";(globalThis.webpackChunknolo_28_mokgosi=globalThis.webpackChunknolo_28_mokgosi||[]).push([[3499],{158(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"development/azure/First Pipeline","title":"First Azure Pipeline","description":"Pipeline","source":"@site/docs/development/azure/1. First Pipeline.md","sourceDirName":"development/azure","slug":"/development/azure/first_azure_pipeline","permalink":"/docs/development/azure/first_azure_pipeline","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"First Azure Pipeline","slug":"first_azure_pipeline","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Enterprise Architecture 101","permalink":"/docs/architecture/Enterprise Architecture 101"},"next":{"title":"Firebase Token Validation in Azure","permalink":"/docs/development/azure/jwttokenvalidationonazurefunction"}}');var t=i(4848),o=i(8453);const l={sidebar_label:"First Azure Pipeline",slug:"first_azure_pipeline",sidebar_position:1},r="First Azure Pipeline",a={},p=[{value:"Microsoft Tutorial",id:"microsoft-tutorial",level:2},{value:"Pipeline Example",id:"pipeline-example",level:3},{value:"Wolfgang Tutorial",id:"wolfgang-tutorial",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"first-azure-pipeline",children:"First Azure Pipeline"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Pipeline",src:i(7405).A+"",width:"648",height:"105"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"source"})}),": ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/learn/modules/build-first-bicep-deployment-pipeline-using-azure-pipelines/1-introduction",children:"Ms"})]}),"\n",(0,t.jsx)(n.p,{children:'I wanted to create a CI/CD pipeline in azure and I spent some time "googling" till i found 2 tutorials that were clear and helped me to create my first pipeline on Azure.'}),"\n",(0,t.jsx)(n.p,{children:"I wanted to to"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Automatically create infrastructure in Azure using bicep"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Automatically deploy Azure function running on App Service Plan"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["I came across a 43 minutes ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/learn/modules/build-first-bicep-deployment-pipeline-using-azure-pipelines/",children:"Microsoft Tutorial"})," that helped me to deploy my function."]}),"\n",(0,t.jsxs)(n.p,{children:["I also followed a ",(0,t.jsx)(n.a,{href:"https://www.programmingwithwolfgang.com/deploy-azure-functions-azure-devops-pipelines/",children:"Deploy Azure Functions with Azure DevOps YAML Pipelines"})," by Wolfgang Ofner."]}),"\n",(0,t.jsx)(n.p,{children:"Below sections highlights key points I learned from this tutorials."}),"\n",(0,t.jsx)(n.h2,{id:"microsoft-tutorial",children:"Microsoft Tutorial"}),"\n",(0,t.jsxs)(n.p,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/learn/modules/build-first-bicep-deployment-pipeline-using-azure-pipelines/",children:"Build your first Bicep deployment pipeline by using Azure Pipelines"})]}),"\n",(0,t.jsx)(n.p,{children:"The tutorial starts with pre-requisites & covers key points about Azure pipelines including:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pipeline"})," : A pipeline is the repeatable process that you use to test and deploy your code defined in a configuration file"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Agent"}),": A computer used by pipeline to execute deployment steps. The agents sometimes are called Microsoft-hosted agents or hosted agents because they're hosted on your behalf"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Agent Pool"}),': for a lack of better explanation, a pool of "same type" agents. When running a pipeline, it waits for agent from pool to be available before execution. You can choose to run self-hosted agent if you have special software needs.']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Sevice Connection"}),": Required to deploy bicep files to azure. When we deploy bicep locally, we go through az login process to authenticate. Because the manual authentication process does not exist in pipelines, we need to use Service Connection. Service Connection securely stores the service principal's credentials (Application ID & Secret) so that the pipeline can use them to authenticate."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pipeline-example",children:"Pipeline Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"trigger:\nbranches:\n    include:\n    - main\n    - release/*\n    exclude:\n    - feature/*\n  paths:\n    exclude:\n    - docs\n    - design\n    include:\n    - deploy/ci-cd-pipeline.yml\n    - bicep\n\npool:\n  vmImage: ubuntu-latest\n\njobs:\n- job:\n  steps:\n  - script: echo Hello, world!\n    displayName: 'Run a one-line script'\n  \n  - script: |\n      echo We'll add more steps soon.\n      echo For example, we'll add our Bicep deployment step.\n    displayName: 'Run a multi-line script'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Source: ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/learn/modules/build-first-bicep-deployment-pipeline-using-azure-pipelines/2-understand-azure-pipelines",children:"MS"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"trigger"}),": instructs pipeline when to run a pipeline. none is manual. The fact that you can include or exclude branches, folders and files is super cool. In this example, only main & release branches are included. When docs & design is updated, the pipeline won't execute."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"pool"}),": instructs pipeline which pool to use. You can choose between linux & win pools"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"jobs"}),": Groups all the jobs in the pipeline. Its optional if you have only one job"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"job"}),": container with sequence of steps to execute. Its optional if you have only one job"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"steps"}),": Sequence of actions to be executed by the job. In this example, text is echod' & display name is the title of the step visible in the portal.\nEach step is the same as commands we run on bash or powershell. There are 2 types of steps, script & task."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"wolfgang-tutorial",children:"Wolfgang Tutorial"}),"\n",(0,t.jsxs)(n.p,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://www.programmingwithwolfgang.com/deploy-azure-functions-azure-devops-pipelines/",children:"Deploy Azure Functions with Azure DevOps YAML Pipelines"})]}),"\n",(0,t.jsx)(n.p,{children:"Once you understand the basics outlined in the above tutorial, this blog post looks straight forward. The sample follows below steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Build Solution"}),"\n",(0,t.jsx)(n.li,{children:"Publish Solutino"}),"\n",(0,t.jsx)(n.li,{children:"Deploy Azure function"}),"\n",(0,t.jsx)(n.li,{children:"Update App Settings"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},7405(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/az-pipeline-26fb39e1d3648f3485d1c9d020939bd4.png"},8453(e,n,i){i.d(n,{R:()=>l,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);